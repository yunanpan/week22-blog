(this.webpackJsonphw1=this.webpackJsonphw1||[]).push([[0],{32:function(n,t,e){},39:function(n,t,e){"use strict";e.r(t);var r=e(1),o=e(0),c=e(22),i=e.n(c),u=(e(32),e(4)),a=e(3),s=e(2),b=e(10),f=e(5),j="@media only screen and (max-width: 768px)",l=Object(o.createContext)(null),d="token",h=function(n){localStorage.setItem(d,n)},p=function(){return localStorage.getItem(d)};function x(){var n=Object(a.a)(["\n  display: block;\n  width: 100px;\n  text-align: center;\n  text-decoration: none;\n  color: ",";\n  font-size: ",";\n\n  ","\n"]);return x=function(){return n},n}function O(){var n=Object(a.a)(["\n  display: flex;\n\n  "," {\n    justify-content: space-between;\n  }\n"]);return O=function(){return n},n}function m(){var n=Object(a.a)(["\n  color: ",";\n  font-size: ",";\n  font-style: italic;\n\n  "," {\n    text-align: center;\n  }\n"]);return m=function(){return n},n}function g(){var n=Object(a.a)(["\n  display: flex;\n  justify-content: space-between;\n  box-sizing: border-box;\n  padding-left: 20px;\n  margin-bottom: 20px;\n  border-bottom: 1px solid ",";\n  height: 52px;\n  line-height: 52px;\n\n  "," {\n    flex-direction: column;\n    padding-left: 0px;\n    line-height: 26px;\n  }\n"]);return g=function(){return n},n}function v(){var n=Object(a.a)([""]);return v=function(){return n},n}var y=s.b.div(v()),S=s.b.div(g(),(function(n){return n.theme.colors.primaryLighter}),j),k=s.b.div(m(),(function(n){return n.theme.colors.primaryDark}),(function(n){return n.theme.fontSize.fontLarge}),j),w=s.b.div(O(),j),z=Object(s.b)(b.b)(x(),(function(n){return n.theme.colors.primaryDark}),(function(n){return n.theme.fontSize.fontSmall}),(function(n){return n.$active&&"\n    background: ".concat(n.theme.colors.primaryLighter,";\n  ")}));function L(){var n=Object(f.g)(),t=Object(f.f)(),e=n.pathname,c=Object(o.useContext)(l),i=c.user,u=c.setUser;return Object(r.jsx)(y,{children:Object(r.jsxs)(S,{children:[Object(r.jsx)(k,{children:"blog"}),Object(r.jsxs)(w,{children:[Object(r.jsx)(z,{$active:"/"===e,to:"/",children:"\u9996\u9801"}),Object(r.jsx)(z,{$active:"/about"===e,to:"/about",children:"\u95dc\u65bc\u6211"}),i&&Object(r.jsx)(z,{$active:"/new-post"===e,to:"new-post",children:"\u65b0\u589e\u6587\u7ae0"}),!i&&Object(r.jsx)(z,{$active:"/login"===e,to:"/login",children:"\u767b\u5165"}),!i&&Object(r.jsx)(z,{$active:"/register"===e,to:"/register",children:"\u8a3b\u518a"}),i&&Object(r.jsx)(z,{onClick:function(){h(""),u(null),"/"!==n.pathname&&t.push("/")},children:"\u767b\u51fa"})]})]})})}var D=e(26),C="https://student-json-api.lidemy.me",P=function(){var n=p();return fetch("".concat(C,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))};function T(){var n=Object(a.a)(["\n  position: absolute;\n  margin-top: 200px;\n  padding: 100px;\n  left: 50%;\n  transform: translateX(-50%);\n  max-width: 240px;\n  border-radius: 20px;\n  background: ",';\n\n  &:before {\n    content: "Loading...";\n    display: block;\n    text-align: center;\n    color: ',";\n    font-size: ",";\n  }\n"]);return T=function(){return n},n}function B(){var n=Object(a.a)(["\n  margin: 0 5px;\n  padding: 5px;\n  border: none;\n  border-radius: 3px;\n  color: ",";\n  background: ",";\n  font-size: ",";\n  cursor: pointer;\n"]);return B=function(){return n},n}function N(){var n=Object(a.a)(["\n  display: flex;\n  justify-content: center;\n  padding: 20px;\n"]);return N=function(){return n},n}function $(){var n=Object(a.a)(["\n  color: ",";\n  font-size: ",";\n  line-height: ",";\n"]);return $=function(){return n},n}function _(){var n=Object(a.a)(["\n  text-decoration: none;\n  color: ",";\n  font-size: ",";\n  line-height: ",";\n"]);return _=function(){return n},n}function E(){var n=Object(a.a)(["\n  display: flex;\n  justify-content: space-between;\n  box-sizing: border-box;\n  padding: 20px 20px;\n  margin: 0px 40px;\n  border-bottom: 1px solid ",";\n\n  "," {\n    flex-direction: column;\n  }\n"]);return E=function(){return n},n}function J(){var n=Object(a.a)(["\n  height: 80vh;\n"]);return J=function(){return n},n}function M(){var n=Object(a.a)([""]);return M=function(){return n},n}var A=s.b.div(M()),F=s.b.div(J()),I=s.b.div(E(),(function(n){return n.theme.colors.primaryLighter}),j),U=Object(s.b)(b.b)(_(),(function(n){return n.theme.colors.primaryDark}),(function(n){return n.theme.fontSize.fontMedium}),(function(n){return n.theme.fontSize.fontLarge})),X=s.b.div($(),(function(n){return n.theme.colors.primary}),(function(n){return n.theme.fontSize.fontSmall}),(function(n){return n.theme.fontSize.fontLarge}));function q(n){var t=n.post;return Object(r.jsxs)(I,{children:[Object(r.jsx)(U,{to:"/posts/".concat(t.id),children:t.title}),Object(r.jsx)(X,{children:new Date(t.createdAt).toLocaleString()})]})}function G(n){var t=n.setCurrentPage,e=n.currentPage,o=n.totalPages,c=function(n){var r=n.target.innerText;return"prev"===r&&"1"!==e?t(Number(e)-1):"next"===r&&Number(e)!==o.length?t(Number(e)+1):"first"===r?t(1):"last"===r?t(o.length):"prev"!==r&&"next"!==r?t(r):void 0};return Object(r.jsxs)(H,{children:[Object(r.jsx)(K,{onClick:c,children:"first"}),Object(r.jsx)(K,{onClick:c,children:"prev"}),o.map((function(n,t){return Object(r.jsx)(K,{onClick:c,children:n},t)})),Object(r.jsx)(K,{onClick:c,children:"next"}),Object(r.jsx)(K,{onClick:c,children:"last"})]})}var H=s.b.div(N()),K=s.b.button(B(),(function(n){return n.theme.colors.primaryDarker}),(function(n){return n.theme.colors.primaryLighter}),(function(n){return n.theme.fontSize.fontSmall})),Q=s.b.div(T(),(function(n){return n.theme.colors.primaryDark}),(function(n){return n.theme.colors.primaryLighter}),(function(n){return n.theme.fontSize.fontLarge}));function R(){var n=Object(o.useState)([]),t=Object(u.a)(n,2),e=t[0],c=t[1],i=Object(o.useState)("1"),a=Object(u.a)(i,2),s=a[0],b=a[1],f=Object(o.useState)([]),j=Object(u.a)(f,2),l=j[0],d=j[1],h=Object(o.useState)(!0),p=Object(u.a)(h,2),x=p[0],O=p[1];return Object(o.useEffect)((function(){fetch("".concat(C,"/posts?_sort=createdAt&_order=desc")).then((function(n){return n.json()})).then((function(n){for(var t=Math.ceil(n.length/5),e=function(n){d((function(t){return[].concat(Object(D.a)(t),[n])}))},r=1;r<=t;r++)e(r);O(!1)}))}),[]),Object(o.useEffect)((function(){(function(n,t){return fetch("".concat(C,"/posts?_sort=createdAt&_order=desc&_page=").concat(n,"&_limit=").concat(t)).then((function(n){return n.json()}))})(s,5).then((function(n){c(n)}))}),[s]),Object(r.jsxs)(A,{children:[x&&Object(r.jsx)(Q,{}),!x&&Object(r.jsx)(F,{children:e.map((function(n){return Object(r.jsx)(q,{post:n},n.id)}))}),!x&&Object(r.jsx)(G,{setCurrentPage:b,currentPage:s,totalPages:l})]})}function V(){var n=Object(a.a)(["\n  margin-top: 20px;\n  padding: 5px;\n  position: relative;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 60%;\n  border: none;\n  color: ",";\n  background: ",";\n  outline: none;\n"]);return V=function(){return n},n}function W(){var n=Object(a.a)(["\n  box-sizing: border-box;\n  margin-top: 5px;\n  padding: 2px 5px;\n  width: 100%;\n  border: 1px solid ",";\n  outline: none;\n"]);return W=function(){return n},n}function Y(){var n=Object(a.a)(["\n  color: ",";\n"]);return Y=function(){return n},n}function Z(){var n=Object(a.a)(["\n  margin: auto;\n  width: 60%;\n\n  & + & {\n    margin-top: 20px;\n  }\n"]);return Z=function(){return n},n}function nn(){var n=Object(a.a)(["\n  max-width: 480px;\n  margin: 50px auto;\n  padding: 20px;\n  border: 1px solid ",";\n"]);return nn=function(){return n},n}function tn(){var n=Object(a.a)(["\n  color: red;\n  text-align: center;\n"]);return tn=function(){return n},n}var en=s.b.div(tn()),rn=s.b.form(nn(),(function(n){return n.theme.colors.primaryLight})),on=s.b.div(Z()),cn=s.b.div(Y(),(function(n){return n.theme.colors.primaryDark})),un=s.b.input(W(),(function(n){return n.theme.colors.primaryDark})),an=s.b.button(V(),(function(n){return n.theme.colors.primaryLighter}),(function(n){return n.theme.colors.primaryDark}));function sn(){var n=Object(o.useContext)(l).setUser,t=Object(o.useState)(""),e=Object(u.a)(t,2),c=e[0],i=e[1],a=Object(o.useState)(""),s=Object(u.a)(a,2),b=s[0],j=s[1],d=Object(o.useState)(),p=Object(u.a)(d,2),x=p[0],O=p[1],m=Object(o.useState)(!1),g=Object(u.a)(m,2),v=g[0],y=g[1],S=Object(f.f)();return Object(r.jsxs)(rn,{onSubmit:function(t){t.preventDefault(),v||(y(!0),O(null),function(n,t){return fetch("".concat(C,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:t})}).then((function(n){return n.json()}))}(c,b).then((function(t){if(0===t.ok)return y(!1),O(t.message);h(t.token),P().then((function(t){if(1!==t.ok)return h(null),y(!1),O(t.message);n(t.data),y(!1),S.push("/")}))})))},children:[Object(r.jsxs)(on,{children:[Object(r.jsx)(cn,{children:"username:"}),Object(r.jsx)(un,{type:"text",value:c,onChange:function(n){return i(n.target.value)}})]}),Object(r.jsxs)(on,{children:[Object(r.jsx)(cn,{children:"password:"}),Object(r.jsx)(un,{type:"password",value:b,onChange:function(n){return j(n.target.value)}})]}),Object(r.jsx)(an,{children:v?"\u767b\u5165\u4e2d\u2026":"\u767b\u5165"}),x&&Object(r.jsx)(en,{children:x})]})}function bn(){var n=Object(a.a)(["\n  margin-top: 20px;\n  color: ",";\n  line-height: ",";\n  word-break: break-all;\n  text-align: justify;\n"]);return bn=function(){return n},n}function fn(){var n=Object(a.a)(["\n  font-size: ",";\n  color: ",";\n"]);return fn=function(){return n},n}function jn(){var n=Object(a.a)(["\n  color: ",";\n  font-size: ",";\n"]);return jn=function(){return n},n}function ln(){var n=Object(a.a)(["\n  display: flex;\n  justify-content: space-between;\n  box-sizing: border-box;\n  padding-bottom: 10px;\n  border-bottom: 1px solid ",";\n  line-height: ",";\n"]);return ln=function(){return n},n}function dn(){var n=Object(a.a)(["\n  margin: 40px;\n  padding: 20px;\n  border: 1px solid ",";\n"]);return dn=function(){return n},n}var hn=s.b.div(dn(),(function(n){return n.theme.colors.primaryLight})),pn=s.b.div(ln(),(function(n){return n.theme.colors.primaryLight}),(function(n){return n.theme.fontSize.fontMedium})),xn=s.b.div(jn(),(function(n){return n.theme.colors.primaryDark}),(function(n){return n.theme.fontSize.fontMedium})),On=s.b.div(fn(),(function(n){return n.theme.fontSize.fontSmall}),(function(n){return n.theme.colors.primaryLight})),mn=s.b.div(bn(),(function(n){return n.theme.colors.primaryDark}),(function(n){return n.theme.fontSize.fontLarge}));function gn(){var n=Object(f.h)().slug,t=Object(o.useState)(),e=Object(u.a)(t,2),c=e[0],i=e[1];return Object(o.useEffect)((function(){var t;(t=n,fetch("".concat(C,"/posts/").concat(t)).then((function(n){return n.json()}))).then((function(n){i(n)}))}),[n]),Object(r.jsx)("div",{children:c&&Object(r.jsxs)(hn,{children:[Object(r.jsxs)(pn,{children:[Object(r.jsx)(xn,{children:c.title}),Object(r.jsx)(On,{children:new Date(c.createdAt).toLocaleString()})]}),Object(r.jsx)(mn,{children:c.body})]})})}function vn(){var n=Object(a.a)(["\n  color: red;\n"]);return vn=function(){return n},n}function yn(){var n=Object(a.a)(["\n  margin-top: 20px;\n  padding: 5px;\n  position: relative;\n  width: 100%;\n  border: none;\n  font-size: ",";\n  color: ",";\n  background: ",";\n  outline: none;\n  cursor: pointer;\n"]);return yn=function(){return n},n}function Sn(){var n=Object(a.a)(["\n  box-sizing: border-box;\n  display: block;\n  width: 100%;\n"]);return Sn=function(){return n},n}function kn(){var n=Object(a.a)(["\n  box-sizing: border-box;\n  padding: 0 5px;\n  width: 100%;\n"]);return kn=function(){return n},n}function wn(){var n=Object(a.a)(["\n  min-width: 60px;\n  margin-right: 5px;\n  padding: 5px;\n  text-align: center;\n  font-size: ",";\n  color: ",";\n  background: ",";\n"]);return wn=function(){return n},n}function zn(){var n=Object(a.a)(["\n  display: flex;\n  margin-bottom: 20px;\n"]);return zn=function(){return n},n}function Ln(){var n=Object(a.a)(["\n  max-width: 480px;\n  margin: 50px auto;\n  padding: 20px;\n  border: 1px solid ",";\n"]);return Ln=function(){return n},n}var Dn=s.b.form(Ln(),(function(n){return n.theme.colors.primaryLight})),Cn=s.b.div(zn()),Pn=s.b.div(wn(),(function(n){return n.theme.fontSize.fontSmall}),(function(n){return n.theme.colors.primaryLighter}),(function(n){return n.theme.colors.primaryDark})),Tn=s.b.input(kn()),Bn=s.b.textarea(Sn()),Nn=s.b.button(yn(),(function(n){return n.theme.fontSize.fontSmall}),(function(n){return n.theme.colors.primaryLighter}),(function(n){return n.theme.colors.primaryDark})),$n=s.b.div(vn());function _n(){var n=Object(f.f)(),t=Object(o.useState)(""),e=Object(u.a)(t,2),c=e[0],i=e[1],a=Object(o.useState)(""),s=Object(u.a)(a,2),b=s[0],j=s[1],l=Object(o.useState)("\u4e0d\u5f97\u70ba\u7a7a"),d=Object(u.a)(l,1)[0],h=Object(o.useState)(!1),x=Object(u.a)(h,2),O=x[0],m=x[1];return Object(r.jsxs)(Dn,{onSubmit:function(t){t.preventDefault(),m(!0),""!==c&&""!==b&&function(n,t){var e=p();return fetch("".concat(C,"/posts"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(e)},body:JSON.stringify({title:n,body:t})}).then((function(n){return n.json()}))}(c,b).then((function(t){n.push("/posts/".concat(t.id))}))},children:[O&&""===c&&Object(r.jsx)($n,{children:d}),Object(r.jsxs)(Cn,{children:[Object(r.jsx)(Pn,{children:"\u6587\u7ae0\u6a19\u984c"}),Object(r.jsx)(Tn,{value:c,placeholder:"\u8acb\u8f38\u5165\u6587\u7ae0\u6a19\u984c",onChange:function(n){return i(n.target.value)}})]}),Object(r.jsx)(Bn,{rows:"20",value:b,onChange:function(n){return j(n.target.value)}}),O&&""===b&&Object(r.jsx)($n,{children:d}),Object(r.jsx)(Nn,{children:"\u9001\u51fa\u6587\u7ae0"})]})}function En(){var n=Object(a.a)(["\n  margin-top: 24px;\n  padding: 0 20px;\n  text-align: justify;\n"]);return En=function(){return n},n}function Jn(){var n=Object(a.a)(["\n  padding-bottom: 10px;\n  border-bottom: 1px solid ",";\n  text-align: center;\n  color: ",";\n  font-size: ",";\n  font-style: italic;\n"]);return Jn=function(){return n},n}function Mn(){var n=Object(a.a)(["\n  max-width: 480px;\n  margin: 50px auto;\n  padding: 20px;\n  border: 1px solid ",";\n"]);return Mn=function(){return n},n}var An=s.b.form(Mn(),(function(n){return n.theme.colors.primaryLight})),Fn=s.b.div(Jn(),(function(n){return n.theme.colors.primaryLight}),(function(n){return n.theme.colors.primaryDark}),(function(n){return n.theme.fontSize.fontTitle})),In=s.b.div(En());function Un(){return Object(r.jsxs)(An,{children:[Object(r.jsx)(Fn,{children:"about me"}),Object(r.jsx)(In,{children:"\u9019\u500b\u90e8\u843d\u683c\u5145\u6eff\u4e86\u5927\u5bb6\u62ff\u4f86\u7df4\u7fd2\u7528\u7684\u6587\u7ae0\uff0c\u4f46\u662f\u4e0d\u6703\u770b\u5230\u5927\u91cf\u7684\u81ea\u62cd\u7167\u7684\u90e8\u843d\u683c\u5c31\u662f\u597d\u7684\u90e8\u843d\u683c\u3002"})]})}function Xn(){var n=Object(a.a)(["\n  margin-top: 20px;\n  padding: 5px;\n  position: relative;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 60%;\n  border: none;\n  color: ",";\n  background: ",";\n  outline: none;\n"]);return Xn=function(){return n},n}function qn(){var n=Object(a.a)(["\n  box-sizing: border-box;\n  margin-top: 5px;\n  padding: 2px 5px;\n  width: 100%;\n  border: 1px solid ",";\n  outline: none;\n"]);return qn=function(){return n},n}function Gn(){var n=Object(a.a)(["\n  color: ",";\n"]);return Gn=function(){return n},n}function Hn(){var n=Object(a.a)(["\n  margin: auto;\n  width: 60%;\n\n  & + & {\n    margin-top: 20px;\n  }\n"]);return Hn=function(){return n},n}function Kn(){var n=Object(a.a)(["\n  max-width: 480px;\n  margin: 50px auto;\n  padding: 20px;\n  border: 1px solid ",";\n"]);return Kn=function(){return n},n}function Qn(){var n=Object(a.a)(["\n  color: red;\n  text-align: center;\n"]);return Qn=function(){return n},n}var Rn=s.b.div(Qn()),Vn=s.b.form(Kn(),(function(n){return n.theme.colors.primaryLight})),Wn=s.b.div(Hn()),Yn=s.b.div(Gn(),(function(n){return n.theme.colors.primaryDark})),Zn=s.b.input(qn(),(function(n){return n.theme.colors.primaryDark})),nt=s.b.button(Xn(),(function(n){return n.theme.colors.primaryLighter}),(function(n){return n.theme.colors.primaryDark}));function tt(){var n=Object(o.useContext)(l).setUser,t=Object(o.useState)(""),e=Object(u.a)(t,2),c=e[0],i=e[1],a=Object(o.useState)(""),s=Object(u.a)(a,2),b=s[0],j=s[1],d=Object(o.useState)(""),p=Object(u.a)(d,2),x=p[0],O=p[1],m=Object(o.useState)(),g=Object(u.a)(m,2),v=g[0],y=g[1],S=Object(o.useState)(!1),k=Object(u.a)(S,2),w=k[0],z=k[1],L=Object(f.f)();return Object(r.jsxs)(Vn,{onSubmit:function(t){t.preventDefault(),w||(z(!0),y(null),function(n,t,e){return fetch("".concat(C,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:n,username:t,password:e})}).then((function(n){return n.json()}))}(c,b,x).then((function(t){0!==t.ok?(h(t.token),P().then((function(t){if(1!==t.ok)return h(null),z(!1),y(t.message);n(t.data),z(!1),L.push("/")}))):y(t.message)})))},children:[Object(r.jsxs)(Wn,{children:[Object(r.jsx)(Yn,{children:"nickname:"}),Object(r.jsx)(Zn,{type:"text",value:c,onChange:function(n){return i(n.target.value)}})]}),Object(r.jsxs)(Wn,{children:[Object(r.jsx)(Yn,{children:"username:"}),Object(r.jsx)(Zn,{type:"text",value:b,onChange:function(n){return j(n.target.value)}})]}),Object(r.jsxs)(Wn,{children:[Object(r.jsx)(Yn,{children:"password:"}),Object(r.jsx)(Zn,{type:"password",value:x,onChange:function(n){return O(n.target.value)}})]}),Object(r.jsx)(nt,{children:w?"\u8a3b\u518a\u4e2d\u2026":"\u8a3b\u518a"}),v&&Object(r.jsx)(Rn,{children:v})]})}function et(){var n=Object(a.a)([""]);return et=function(){return n},n}var rt=s.b.div(et());var ot=function(){var n=Object(o.useState)(null),t=Object(u.a)(n,2),e=t[0],c=t[1],i=Object(o.useState)(!0),a=Object(u.a)(i,2),s=a[0],j=a[1];return Object(o.useEffect)((function(){p()?P().then((function(n){n.ok&&(c(n.data),j(!1))})):j(!1)}),[]),Object(r.jsx)(l.Provider,{value:{user:e,setUser:c},children:Object(r.jsx)(rt,{children:Object(r.jsxs)(b.a,{children:[!s&&Object(r.jsx)(L,{}),Object(r.jsxs)(f.c,{children:[Object(r.jsx)(f.a,{exact:!0,path:"/",children:Object(r.jsx)(R,{})}),Object(r.jsx)(f.a,{exact:!0,path:"/login",children:Object(r.jsx)(sn,{})}),Object(r.jsx)(f.a,{exact:!0,path:"/posts/:slug",children:Object(r.jsx)(gn,{})}),Object(r.jsx)(f.a,{exact:!0,path:"/new-post",children:Object(r.jsx)(_n,{})}),Object(r.jsx)(f.a,{exact:!0,path:"/about",children:Object(r.jsx)(Un,{})}),Object(r.jsx)(f.a,{exact:!0,path:"/register",children:Object(r.jsx)(tt,{})})]})]})})})},ct=function(n){n&&n instanceof Function&&e.e(3).then(e.bind(null,40)).then((function(t){var e=t.getCLS,r=t.getFID,o=t.getFCP,c=t.getLCP,i=t.getTTFB;e(n),r(n),o(n),c(n),i(n)}))};i.a.render(Object(r.jsx)(s.a,{theme:{colors:{primaryLighter:"#dbeede",primaryLight:"#B1B479",primary:"#939650",primaryDark:"#616138"},fontSize:{fontTitle:"32px",fontLarge:"24px",fontMedium:"18px",fontSmall:"14px"}},children:Object(r.jsx)(ot,{})}),document.getElementById("root")),ct()}},[[39,1,2]]]);
//# sourceMappingURL=main.3e3160f4.chunk.js.map